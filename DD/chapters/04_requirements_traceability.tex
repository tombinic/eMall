\chapter{Requirements Traceability}
\section{eMSP}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
% \usepackage{longtable}
% Note: It may be necessary to compile the document several times to get a multi-page table to line up properly
\begin{longtable}[c]{|c|l|l|}
\hline
\rowcolor[HTML]{B8C8D5} 
\textbf{Requirement} & \multicolumn{1}{c|}{\cellcolor[HTML]{B8C8D5}\textbf{Description}} & \multicolumn{1}{c|}{\cellcolor[HTML]{B8C8D5}\textbf{Design element}} \\ \hline
\endfirsthead
%
\endhead
%
R.1 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user \\ to register himself to the system by \\ providing all the mandatory information.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ AuthHandler,\\ RequestHandler, \\ EURegistrationHandler\\ DataManager\\ DatabaseServer\end{tabular} \\ \hline
R.2 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to\\  register a payment method.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.3 & \begin{tabular}[c]{@{}l@{}}The system must verify the uniqueness\\  of the mail and username of the\\  end user to be registered.\end{tabular} & \begin{tabular}[c]{@{}l@{}}\\ AuthHandler,\\ RequestHandler, \\ EURegistrationHandler\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.4 & \begin{tabular}[c]{@{}l@{}}The system must send a confirmation \\ on the end user’s email after his\\  registration.\end{tabular} & \begin{tabular}[c]{@{}l@{}}AuthHandler,\\ RequestHandler, \\ EURegistrationHandler,\\ DataManager,\\ DatabaseServer,\\ MailManager,\\ MailServer\end{tabular} \\ \hline
R.5 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to \\ log into their account by entering\\  their username and password.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ AuthHandler,\\ RequestHandler, \\ EULoginHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.6 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to \\ book a charging socket of a certain\\ charging station in a specific time slot.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer,\\ StatusHandler,\\ ChargingSocket\end{tabular} \\ \hline
R.7 & \begin{tabular}[c]{@{}l@{}}The system must generate a QR-Code \\ after the end user’s reservation.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.8 & \begin{tabular}[c]{@{}l@{}}The system must show to the end user \\ the suggested charging stations.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.9 & \begin{tabular}[c]{@{}l@{}}The system must show to the end user \\ the available and unavailable time\\  slots of a certain charging socket.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer,\\ StatusHandler,\\ ChargingSocket\end{tabular} \\ \hline
R.10 & \begin{tabular}[c]{@{}l@{}}The system must access to the end \\ user’s location through GPS.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler\end{tabular} \\ \hline
R.11 & \begin{tabular}[c]{@{}l@{}}The system must access to the end \\ user’s calendar.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler\end{tabular} \\ \hline
R.12 & \begin{tabular}[c]{@{}l@{}}The system must access to the end \\ user’s vehicle status battery.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler\end{tabular} \\ \hline
R.13 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user \\ to delete his reservation.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler\end{tabular} \\ \hline
R.14 & \begin{tabular}[c]{@{}l@{}}The system must notify the end user \\ when the charge of his vehicle is\\ completed.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.15 & \begin{tabular}[c]{@{}l@{}}The system must subtract the cost of\\ the charge from end user’s \\ payment method.\end{tabular} & \begin{tabular}[c]{@{}l@{}}eMSPHandler,\\PaymentHandler \end{tabular}\\ \hline
R.16 & \begin{tabular}[c]{@{}l@{}}The system must send to the end user\\ an email with the invoice \\ for the used service.\end{tabular} & \begin{tabular}[c]{@{}l@{}}PaymentHandler\\ MailManager,\\ MailServer\end{tabular} \\ \hline
R.17 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to\\  book a time slot.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.18 & \begin{tabular}[c]{@{}l@{}}The system must stop the charge when\\ the upper bound of timeslot is \\ exceeded.\end{tabular} & \begin{tabular}[c]{@{}l@{}}StatusHandler,\\ ChargingSocket\end{tabular} \\ \hline
R.19 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user \\ to see his current bookings.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer,\end{tabular} \\ \hline
R.20 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user \\ to search for a certain charging station.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer,\end{tabular} \\ \hline
R.21 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to\\  stop the charging process.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ StatusHandler,\\ ChargingSocket,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.22 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user to\\  start the charging process.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ StatusHandler,\\ ChargingSocket,\\ DataManager,\\ DatabaseServer,\\QRCodeHandler,\\BookingChecker\end{tabular} \\ \hline
R.23 & \begin{tabular}[c]{@{}l@{}}The system must allow the end user \\ to monitor the charging process.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ StatusHandler,\\ ChargingSocket,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.24 & \begin{tabular}[c]{@{}l@{}}The system must prevent the end user \\ from reserving a charging socket in \\ a certain time slot, if he already has \\ another reservation in that time slot.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.25 & \begin{tabular}[c]{@{}l@{}}The system must prevent at least two \\ different end users from reserving the\\ same charging socket in the same time \\slot.\end{tabular} & \begin{tabular}[c]{@{}l@{}}EndUserApp,\\ eMSPHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.26 & \begin{tabular}[c]{@{}l@{}}The system must allow the CPO to\\  register himself to the system by\\  providing all the mandatory and\\  commercial information.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ AuthHandler, \\ RequestHandler, \\ CPORegistrationHandler, \\ DataManager \\ DatabaseServer\end{tabular} \\ \hline
R.27 & \begin{tabular}[c]{@{}l@{}}The system must verify the \\ uniqueness of the mail of the \\ CPO to be registered.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ AuthHandler, \\ RequestHandler, \\ CPORegistrationHandler, \\ DataManager \\ DatabaseServer\end{tabular} \\ \hline
R.28 & \begin{tabular}[c]{@{}l@{}}The system must verify the\\  correctness of the CPO’s\\  commercial data.\end{tabular} & \begin{tabular}[c]{@{}l@{}}AuthHandler, \\ RequestHandler, \\ CPORegistrationHandler, \\ DataManager \\ DatabaseServer\end{tabular} \\ \hline
R.29 & \begin{tabular}[c]{@{}l@{}}The system must send a\\  confirmation on the CPO’s\\  email after his registration.\end{tabular} & \begin{tabular}[c]{@{}l@{}}AuthHandler, \\ RequestHandler, \\ CPORegistrationHandler, \\ DataManager ,\\ DatabaseServer,\\ MailManager,\\ MailServer\end{tabular} \\ \hline
R.30 & \begin{tabular}[c]{@{}l@{}}The system must allow the\\  CPO to log into their\\  account by entering \\ their username and \\ password.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ AuthHandler, \\ RequestHandler, \\ CPOLoginHandler, \\ DataManager \\ DatabaseServer\end{tabular} \\ \hline
R.31 & \begin{tabular}[c]{@{}l@{}}The system must allow the \\ CPO to know the internal \\ and external status of charging \\ sockets of his charging stations.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp, \\ CPMSHandler\\ DataManager \\ DatabaseServer,\\ StatusHandler\end{tabular} \\ \hline
R.32 & \begin{tabular}[c]{@{}l@{}}The system must allow the\\ CPO to monitor the \\ charging process.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ DataManager,\\ DatabaseServer,\\ StatusHandler\end{tabular} \\ \hline
R.33 & \begin{tabular}[c]{@{}l@{}}The system must allow the \\ CPO to acquire information \\ about the price of energy \\ from DSOs.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ DSOManager\end{tabular} \\ \hline
R.34 & \begin{tabular}[c]{@{}l@{}}The system must allow \\ the CPO to acquire energy\\  from DSOs.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ DSOManager\end{tabular} \\ \hline
R.35 & \begin{tabular}[c]{@{}l@{}}The system must allow the\\  CPO to decide whether to\\  store or not energy.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler\end{tabular} \\ \hline
R.36 & \begin{tabular}[c]{@{}l@{}}The system must allow the\\  CPO to decide whether to\\  use available energy in the\\  batteries.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler\end{tabular} \\ \hline
R.37 & \begin{tabular}[c]{@{}l@{}}The system must forbid to \\ charge the vehicle to a user\\ that scans a QR-Code \\ which is not valid (expired, \\ wrong etc.).\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ ScanHandler,\\ QRCodeHandler,\\ BookingChecker\end{tabular} \\ \hline
R.38 & \begin{tabular}[c]{@{}l@{}}The system must indicate \\ whether a slot is booked \\ or not, and it must forbid \\ to book an already booked \\ time slot.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.39 & \begin{tabular}[c]{@{}l@{}}The system must manage \\ the concurrent booking of \\ a slot: if a user waits too \\ much to book a slot and \\ meanwhile another user \\ books that slot, the system\\ must notify the first user \\ when he tries to perform \\ the booking.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.40 & \begin{tabular}[c]{@{}l@{}}The system must allow the \\ CPO to add a new charging \\ station.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ DataManager,\\ DatabaseServer\end{tabular} \\ \hline
R.41 & \begin{tabular}[c]{@{}l@{}}The system must allow the \\ CPO to view, via the CPMS, \\ the charge percentage of the \\ battery cluster.\end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler\end{tabular} \\ \hline
R.42 &  \begin{tabular}[c]{@{}l@{}} If the user initiates charging \\and there is not enough charge \\in the battery cluster, the system,\\ to avoid service disruption,\\ allows the charging station \\to receive power directly \\from the DSO channel. \end{tabular} & \begin{tabular}[c]{@{}l@{}}CPOApp,\\ CPMSHandler,\\ StatusHandler, \\ DSOHandler\end{tabular} \\ \hline
\end{longtable}
\textbf{Why this mapping?} The table above reports the mapping of the design components on the requirements. It is useful so that you have a clear and immediate idea about which components are involved in a certain to satisfy a requirement. In general, we have a division between the requirements handled by the CPMS and by the eMSP. As we can see from the table above all the components are mapped, so each component is important to satisfy a requirement.